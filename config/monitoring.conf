# Enhanced ESS Connectivity Monitoring Configuration
# Copy this file to: /home/uswege/ess/config/monitoring.conf

# ================================
# CONNECTIVITY MONITORING SETTINGS
# ================================

# Target Utumishi Server
UTUMISHI_IP=154.118.230.140
UTUMISHI_PORT=9802
UTUMISHI_BASE_URL=http://154.118.230.140:9802
UTUMISHI_ENDPOINT=http://154.118.230.140:9802/ess-loans/mvtyztwq/consume

# Monitoring Intervals (in seconds)
CONNECTIVITY_CHECK_INTERVAL=120    # 2 minutes
IPSEC_CHECK_INTERVAL=300          # 5 minutes
KEEP_ALIVE_INTERVAL=120           # 2 minutes

# Timeout Settings (in seconds)
CONNECTION_TIMEOUT=15
PING_TIMEOUT=10
RECOVERY_TIMEOUT=60

# Failure Thresholds
MAX_CONSECUTIVE_FAILURES=3        # Trigger recovery after 3 failures
MAX_RECOVERY_ATTEMPTS=3           # Maximum automatic recovery attempts
CRITICAL_FAILURE_THRESHOLD=5      # Send critical alerts after 5 failures

# Recovery Settings
RECOVERY_WAIT_TIME=30            # Wait 30 seconds after IPSec restart
STABILIZATION_TIME=60            # Wait 60 seconds for connection stabilization
RECOVERY_COOLDOWN=300            # Wait 5 minutes between recovery attempts

# Logging Settings
LOG_LEVEL=INFO                   # DEBUG, INFO, WARN, ERROR, CRITICAL
LOG_RETENTION_DAYS=30
MAX_LOG_FILE_SIZE=10M
LOG_ROTATION_ENABLED=true

# ================================
# ALERTING CONFIGURATION
# ================================

# Alert Channels (enable/disable)
EMAIL_ALERTS_ENABLED=false
SMS_ALERTS_ENABLED=false
SLACK_ALERTS_ENABLED=false
WEBHOOK_ALERTS_ENABLED=false

# Email Configuration
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_USERNAME=your-email@domain.com
EMAIL_PASSWORD=your-app-password
EMAIL_TO=admin@yourdomain.com
EMAIL_FROM=ess-monitoring@yourdomain.com

# SMS Configuration (Twilio)
TWILIO_ACCOUNT_SID=your-account-sid
TWILIO_AUTH_TOKEN=your-auth-token
TWILIO_FROM_NUMBER=+1234567890
TWILIO_TO_NUMBER=+0987654321

# Slack Configuration
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_CHANNEL=#ess-alerts
SLACK_USERNAME=ESS-Monitor

# Webhook Configuration
WEBHOOK_URL=https://your-monitoring-system.com/webhook
WEBHOOK_SECRET=your-webhook-secret
WEBHOOK_TIMEOUT=10

# ================================
# SYSTEM CONFIGURATION
# ================================

# Process Management
PM2_APP_NAME=ess-app
PM2_KEEP_ALIVE_NAME=ess-keep-alive

# File Paths
ESS_HOME=/home/uswege/ess
LOGS_DIR=/home/uswege/ess/logs
SCRIPTS_DIR=/home/uswege/ess/scripts
CONFIG_DIR=/home/uswege/ess/config

# System Commands
IPSEC_STATUS_CMD="sudo ipsec status"
IPSEC_RESTART_CMD="sudo ipsec restart"
PING_CMD="ping -c 1 -W 3"

# ================================
# NETWORK CONFIGURATION
# ================================

# Expected IPSec Tunnel Count
EXPECTED_TUNNEL_COUNT=4

# Network Interface Monitoring
MONITOR_NETWORK_INTERFACE=eth0
NETWORK_QUALITY_THRESHOLD=95     # Percentage

# DNS Configuration
PRIMARY_DNS=8.8.8.8
SECONDARY_DNS=1.1.1.1

# ================================
# PERFORMANCE TUNING
# ================================

# Connection Pool Settings
MAX_CONCURRENT_CONNECTIONS=10
CONNECTION_POOL_SIZE=5
KEEP_ALIVE_TIMEOUT=30000

# HTTP Client Settings
USER_AGENT="ESS-Enhanced-Monitor/2.0"
RETRY_ATTEMPTS=3
RETRY_DELAY=1000                 # 1 second base delay

# Buffer Settings
LOG_BUFFER_SIZE=1024
METRIC_BUFFER_SIZE=100

# ================================
# MONITORING ENDPOINTS
# ================================

# Primary Endpoints (in order of preference)
PRIMARY_ENDPOINT=/ess-loans/mvtyztwq/consume
HEALTH_ENDPOINT=/ess-loans/health
PING_ENDPOINT=/ess-loans/ping
STATUS_ENDPOINT=/ess-loans/status
FALLBACK_ENDPOINT=/

# Expected Response Codes (comma-separated)
ACCEPTABLE_HTTP_CODES=200,201,400,401,403,404,500

# ================================
# SECURITY SETTINGS
# ================================

# SSL/TLS Configuration
SSL_VERIFY=false                 # Set to true for production
SSL_TIMEOUT=10

# Rate Limiting
RATE_LIMIT_ENABLED=false
MAX_REQUESTS_PER_MINUTE=60

# ================================
# DEBUGGING AND DIAGNOSTICS
# ================================

# Debug Mode
DEBUG_MODE=false
VERBOSE_LOGGING=false
TRACE_NETWORK_CALLS=false

# Diagnostic Commands
NETWORK_DIAGNOSTIC_ENABLED=true
IPSEC_DIAGNOSTIC_ENABLED=true
DNS_DIAGNOSTIC_ENABLED=true

# Test Mode Settings
TEST_MODE=false
MOCK_RESPONSES=false
SIMULATE_FAILURES=false

# ================================
# BUSINESS LOGIC SETTINGS
# ================================

# Business Hours (24-hour format)
BUSINESS_START_HOUR=8
BUSINESS_END_HOUR=18
BUSINESS_DAYS="MON,TUE,WED,THU,FRI"

# Critical Hours (when immediate alerts are sent)
CRITICAL_START_HOUR=8
CRITICAL_END_HOUR=17

# Maintenance Windows (when monitoring is relaxed)
MAINTENANCE_WINDOW_ENABLED=false
MAINTENANCE_START_TIME="02:00"
MAINTENANCE_END_TIME="04:00"